<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karnataka Complete Administrative Analysis - Interactive Map</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
            background: #000;
            color: #fff;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 50px 20px;
            border-bottom: 2px solid #333;
            background: linear-gradient(180deg, #000 0%, #111 100%);
        }
        
        h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 15px;
            letter-spacing: -1px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #888;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2px;
            background: #222;
            margin: 40px 0;
        }
        
        .stat {
            text-align: center;
            padding: 40px 20px;
            background: #000;
            border: 1px solid #222;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .stat:hover {
            background: #111;
            border-color: #fff;
            transform: translateY(-5px);
        }
        
        .stat::after {
            content: 'üîç Click for details';
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.65rem;
            color: #666;
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
        }
        
        .stat:hover::after {
            opacity: 1;
        }
        
        .stat-num {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }
        
        .stat-description {
            font-size: 0.85rem;
            color: #666;
            margin-top: 10px;
        }
        
        .filters-section {
            background: #111;
            border: 1px solid #333;
            padding: 30px;
            margin: 40px 0;
            border-radius: 4px;
        }
        
        .filters-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .filter-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        select, input {
            background: #000;
            border: 1px solid #333;
            color: #fff;
            padding: 12px 15px;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        select:hover, input:hover {
            border-color: #fff;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #fff;
        }
        
        button {
            background: #fff;
            color: #000;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            background: #ddd;
        }
        
        .map-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            margin: 40px 0;
            min-height: 900px;
        }
        
        .map-wrapper {
            background: #111;
            border: 2px solid #333;
            padding: 40px;
            border-radius: 4px;
            position: relative;
        }
        
        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }
        
        .map-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .map-legend {
            display: flex;
            gap: 20px;
            font-size: 0.85rem;
            color: #888;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-box {
            width: 20px;
            height: 20px;
            border: 1px solid #444;
        }
        
        svg {
            width: 100%;
            height: auto;
            max-height: 800px;
        }
        
        .district {
            fill: #1a1a1a;
            stroke: #444;
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .district:hover {
            fill: #fff;
            stroke: #fff;
            stroke-width: 3;
        }
        
        .district.active {
            fill: #fff;
            stroke: #fff;
            stroke-width: 3;
        }
        
        .district.filtered-out {
            fill: #0a0a0a;
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .district-label {
            fill: #888;
            font-size: 10px;
            font-weight: 600;
            pointer-events: none;
            text-anchor: middle;
        }
        
        .district-number {
            fill: #666;
            font-size: 14px;
            font-weight: 700;
            pointer-events: none;
            text-anchor: middle;
        }
        
        .sidebar {
            background: #111;
            border: 2px solid #333;
            padding: 35px;
            border-radius: 4px;
            position: sticky;
            top: 20px;
            height: fit-content;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .sidebar::-webkit-scrollbar {
            width: 8px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            background: #000;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #222;
        }
        
        .sidebar-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .district-badge {
            background: #222;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            color: #888;
        }
        
        .district-name-big {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 700;
            color: #fff;
            line-height: 1.2;
        }
        
        .district-serial {
            font-size: 1rem;
            color: #666;
            margin-bottom: 25px;
        }
        
        .data-section {
            margin: 30px 0;
            padding: 25px;
            background: #0a0a0a;
            border: 1px solid #222;
            border-radius: 4px;
        }
        
        .section-title {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #222;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .data-item {
            padding: 20px;
            background: #000;
            border: 1px solid #222;
            border-radius: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
        }
        
        .data-item:hover {
            border-color: #fff;
            transform: translateY(-2px);
        }
        
        .data-item::after {
            content: 'üîç';
            position: absolute;
            top: 10px;
            right: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .data-item:hover::after {
            opacity: 1;
        }
        
        .data-label {
            font-size: 0.7rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .data-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
        }
        
        .data-subtext {
            font-size: 0.8rem;
            color: #888;
            margin-top: 5px;
        }
        
        .pattern-type {
            padding: 20px;
            background: #000;
            border: 1px solid #222;
            border-radius: 4px;
            margin-top: 15px;
        }
        
        .pattern-type strong {
            color: #fff;
            display: block;
            margin-bottom: 8px;
        }
        
        .comparison-section {
            margin: 20px 0;
        }
        
        .comparison-bar {
            display: flex;
            height: 40px;
            background: #000;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .comparison-part {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .comparison-part:hover {
            opacity: 0.8;
        }
        
        .taluks-bar {
            background: #333;
        }
        
        .constituencies-bar {
            background: #fff;
            color: #000;
        }
        
        .info-box {
            padding: 20px;
            background: #0a0a0a;
            border-left: 3px solid #fff;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .info-box-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #fff;
        }
        
        .info-box-text {
            font-size: 0.85rem;
            color: #aaa;
            line-height: 1.6;
        }
        
        .info-text {
            color: #666;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #0a0a0a;
            border-radius: 4px;
        }
        
        .data-tables {
            margin: 60px 0;
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #333;
        }
        
        .table-title {
            font-size: 2rem;
            font-weight: 600;
        }
        
        .table-actions {
            display: flex;
            gap: 15px;
        }
        
        .table-wrapper {
            background: #111;
            border: 2px solid #333;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 40px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 18px 20px;
            text-align: left;
            border-bottom: 1px solid #222;
        }
        
        th {
            background: #0a0a0a;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 1.5px;
            color: #888;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        td {
            font-size: 0.95rem;
            color: #ccc;
        }
        
        tr:hover td {
            background: #0a0a0a;
        }
        
        .highlight {
            color: #fff;
            font-weight: 600;
        }
        
        .table-number {
            color: #666;
            font-weight: 600;
            width: 50px;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 60px 0;
        }
        
        .summary-card {
            background: #111;
            border: 2px solid #333;
            padding: 35px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .summary-card:hover {
            border-color: #fff;
            transform: translateY(-5px);
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #fff;
        }
        
        .card-stat {
            font-size: 3rem;
            font-weight: 700;
            margin: 20px 0;
        }
        
        .card-description {
            font-size: 0.9rem;
            color: #888;
            line-height: 1.6;
        }
        
        .card-list {
            list-style: none;
            margin-top: 20px;
        }
        
        .card-list li {
            padding: 10px 0;
            border-bottom: 1px solid #222;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .card-list li:last-child {
            border-bottom: none;
        }
        
        .insights-section {
            background: linear-gradient(135deg, #111 0%, #1a1a1a 100%);
            border: 2px solid #333;
            padding: 50px;
            margin: 60px 0;
            border-radius: 4px;
        }
        
        .insights-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .insight-item {
            background: #000;
            padding: 30px;
            border: 1px solid #333;
            border-radius: 4px;
        }
        
        .insight-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #666;
            margin-bottom: 15px;
        }
        
        .insight-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #fff;
        }
        
        .insight-text {
            font-size: 0.95rem;
            color: #aaa;
            line-height: 1.7;
        }
        
        .methodology-section {
            background: #fff;
            color: #000;
            padding: 60px;
            margin: 60px 0;
            border-radius: 4px;
        }
        
        .methodology-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 30px;
        }
        
        .methodology-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333;
        }
        
        .methodology-list {
            list-style: none;
            margin: 30px 0;
        }
        
        .methodology-list li {
            padding: 20px;
            background: #f5f5f5;
            margin: 15px 0;
            border-left: 4px solid #000;
            border-radius: 4px;
        }
        
        .methodology-list strong {
            display: block;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 999;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }
        
        .modal-overlay.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from {
                transform: translate(-50%, -60%);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%);
                opacity: 1;
            }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            max-width: 1000px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideIn 0.4s ease;
        }
        
        .modal.active {
            display: block;
        }
        
        .modal-content {
            background: #0a0a0a;
            border: 2px solid #333;
            border-radius: 8px;
            position: relative;
        }
        
        .modal-close {
            position: sticky;
            top: 0;
            right: 0;
            float: right;
            font-size: 2.5rem;
            font-weight: 300;
            color: #888;
            cursor: pointer;
            padding: 15px 25px;
            z-index: 10;
            background: #0a0a0a;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            color: #fff;
            transform: rotate(90deg);
        }
        
        .modal-header {
            background: linear-gradient(135deg, #111 0%, #1a1a1a 100%);
            padding: 40px;
            border-bottom: 2px solid #333;
        }
        
        .modal-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #fff;
        }
        
        .modal-subtitle {
            font-size: 1.1rem;
            color: #888;
            line-height: 1.6;
        }
        
        .modal-body {
            padding: 40px;
        }
        
        .modal-section {
            margin: 30px 0;
            padding: 30px;
            background: #000;
            border: 1px solid #222;
            border-radius: 4px;
        }
        
        .modal-section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px solid #222;
            padding-bottom: 10px;
        }
        
        .modal-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .modal-stat-box {
            background: #0a0a0a;
            padding: 25px;
            border: 1px solid #222;
            border-radius: 4px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .modal-stat-box:hover {
            border-color: #fff;
            transform: translateY(-3px);
        }
        
        .modal-stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 10px;
        }
        
        .modal-stat-label {
            font-size: 0.85rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .modal-list {
            list-style: none;
            margin: 20px 0;
        }
        
        .modal-list li {
            padding: 15px 20px;
            background: #0a0a0a;
            margin: 10px 0;
            border-left: 3px solid #fff;
            border-radius: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .modal-list li:hover {
            background: #111;
            padding-left: 30px;
            border-left-width: 5px;
        }
        
        .modal-list-main {
            font-weight: 600;
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 5px;
            display: block;
        }
        
        .modal-list-detail {
            color: #888;
            font-size: 0.9rem;
            display: block;
        }
        
        .modal::-webkit-scrollbar {
            width: 10px;
        }
        
        .modal::-webkit-scrollbar-track {
            background: #000;
        }
        
        .modal::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 5px;
        }
        
        .modal::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .info-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .info-card {
            background: #0a0a0a;
            padding: 25px;
            border: 1px solid #222;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .info-card:hover {
            border-color: #fff;
            transform: translateY(-5px);
        }
        
        .info-card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 15px;
        }
        
        .info-card-content {
            font-size: 0.95rem;
            color: #aaa;
            line-height: 1.7;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #000;
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            border: 1px solid #222;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 0.85rem;
            font-weight: 600;
            transition: width 1s ease;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 12px;
            background: #222;
            border: 1px solid #444;
            border-radius: 20px;
            font-size: 0.75rem;
            color: #aaa;
            margin: 5px;
        }
        
        .badge-primary {
            background: #fff;
            color: #000;
            border-color: #fff;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 4px;
            margin: 20px 0;
            color: #fff;
        }
        
        .highlight-box h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .highlight-box p {
            font-size: 1rem;
            line-height: 1.7;
            opacity: 0.95;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #222;
        }
        
        .data-table th {
            background: #0a0a0a;
            color: #888;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 1px;
        }
        
        .data-table td {
            color: #ccc;
        }
        
        .data-table tr:hover td {
            background: #0a0a0a;
            cursor: pointer;
        }
        
        footer {
            text-align: center;
            padding: 40px 20px;
            border-top: 2px solid #333;
            color: #666;
            margin-top: 80px;
        }
        
        @media (max-width: 1400px) {
            .map-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: relative;
                top: 0;
                max-height: none;
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .data-grid {
                grid-template-columns: 1fr;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .modal {
                width: 95%;
            }
            
            .modal-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Karnataka Administrative Structure</h1>
            <p class="subtitle">Complete Interactive Analysis of 31 Districts, 236 Taluks, and 224 Assembly Constituencies with Advanced Filtering and Detailed Data Visualization</p>
        </header>
        
        <div class="stats-bar">
            <div class="stat" onclick="showStatsModal('districts')">
                <div class="stat-num">31</div>
                <div class="stat-label">Districts</div>
                <div class="stat-description">Across 4 administrative divisions</div>
            </div>
            <div class="stat" onclick="showStatsModal('taluks')">
                <div class="stat-num">236</div>
                <div class="stat-label">Taluks (Tehsils)</div>
                <div class="stat-description">Administrative revenue units</div>
            </div>
            <div class="stat" onclick="showStatsModal('constituencies')">
                <div class="stat-num">224</div>
                <div class="stat-label">Assembly Constituencies</div>
                <div class="stat-description">Electoral representation units</div>
            </div>
            <div class="stat" onclick="showStatsModal('loksabha')">
                <div class="stat-num">28</div>
                <div class="stat-label">Lok Sabha Seats</div>
                <div class="stat-description">Parliamentary constituencies</div>
            </div>
            <div class="stat" onclick="showStatsModal('divisions')">
                <div class="stat-num">4</div>
                <div class="stat-label">Administrative Divisions</div>
                <div class="stat-description">Regional governance units</div>
            </div>
            <div class="stat" onclick="showStatsModal('area')">
                <div class="stat-num">1.91</div>
                <div class="stat-label">Lakh sq km</div>
                <div class="stat-description">Total geographical area</div>
            </div>
        </div>
        
        <div class="filters-section">
            <div class="filters-title">Filter Districts</div>
            <div class="filters-grid">
                <div class="filter-group">
                    <label class="filter-label">By Region</label>
                    <select id="region-filter">
                        <option value="all">All Regions</option>
                        <option value="north">North Karnataka</option>
                        <option value="south">South Karnataka</option>
                        <option value="coastal">Coastal Karnataka</option>
                        <option value="central">Central Karnataka</option>
                        <option value="bengaluru">Bengaluru Region</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">By Mapping Pattern</label>
                    <select id="pattern-filter">
                        <option value="all">All Patterns</option>
                        <option value="equal">1:1 Mapping</option>
                        <option value="more-constituencies">More Constituencies</option>
                        <option value="more-taluks">More Taluks</option>
                        <option value="urban">Urban Split</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Search District</label>
                    <input type="text" id="search-filter" placeholder="Type district name...">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Actions</label>
                    <button onclick="resetFilters()">Reset All Filters</button>
                </div>
            </div>
        </div>
        
        <div class="map-container">
            <div class="map-wrapper">
                <div class="map-header">
                    <div class="map-title">Interactive District Map</div>
                    <div class="map-legend">
                        <div class="legend-item">
                            <div class="legend-box" style="background: #1a1a1a;"></div>
                            <span>Default</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-box" style="background: #fff;"></div>
                            <span>Selected</span>
                        </div>
                    </div>
                </div>
                
                <svg viewBox="0 0 550 750" xmlns="http://www.w3.org/2000/svg">
                    <!-- North Region Districts -->
                    <g data-district="bidar" data-region="north" data-pattern="equal">
                        <path class="district" d="M 390,35 L 490,35 L 490,115 L 435,140 L 390,115 Z"/>
                        <text class="district-number" x="440" y="65">01</text>
                        <text class="district-label" x="440" y="90">Bidar</text>
                    </g>
                    
                    <g data-district="kalaburagi" data-region="north" data-pattern="more-constituencies">
                        <path class="district" d="M 335,90 L 435,90 L 435,165 L 375,190 L 335,165 Z"/>
                        <text class="district-number" x="385" y="115">02</text>
                        <text class="district-label" x="385" y="140">Kalaburagi</text>
                    </g>
                    
                    <g data-district="yadgir" data-region="north" data-pattern="equal">
                        <path class="district" d="M 435,135 L 490,135 L 490,200 L 445,225 L 435,200 Z"/>
                        <text class="district-number" x="462" y="160">03</text>
                        <text class="district-label" x="462" y="182">Yadgir</text>
                    </g>
                    
                    <g data-district="vijayapura" data-region="north" data-pattern="more-constituencies">
                        <path class="district" d="M 230,65 L 335,65 L 335,145 L 270,170 L 230,145 Z"/>
                        <text class="district-number" x="282" y="95">04</text>
                        <text class="district-label" x="282" y="120">Vijayapura</text>
                    </g>
                    
                    <g data-district="bagalkot" data-region="north" data-pattern="more-constituencies">
                        <path class="district" d="M 230,145 L 295,145 L 295,215 L 250,240 L 230,215 Z"/>
                        <text class="district-number" x="262" y="170">05</text>
                        <text class="district-label" x="262" y="192">Bagalkot</text>
                    </g>
                    
                    <g data-district="raichur" data-region="north" data-pattern="more-constituencies">
                        <path class="district" d="M 375,190 L 465,190 L 465,255 L 415,280 L 375,255 Z"/>
                        <text class="district-number" x="420" y="215">06</text>
                        <text class="district-label" x="420" y="237">Raichur</text>
                    </g>
                    
                    <g data-district="koppal" data-region="central" data-pattern="more-constituencies">
                        <path class="district" d="M 295,210 L 375,210 L 375,275 L 325,300 L 295,275 Z"/>
                        <text class="district-number" x="335" y="235">07</text>
                        <text class="district-label" x="335" y="257">Koppal</text>
                    </g>
                    
                    <g data-district="ballari" data-region="central" data-pattern="equal">
                        <path class="district" d="M 375,255 L 465,255 L 465,320 L 415,345 L 375,320 Z"/>
                        <text class="district-number" x="420" y="280">08</text>
                        <text class="district-label" x="420" y="302">Ballari</text>
                    </g>
                    
                    <g data-district="vijayanagara" data-region="central" data-pattern="equal">
                        <path class="district" d="M 415,320 L 465,320 L 465,380 L 435,405 L 415,380 Z"/>
                        <text class="district-number" x="440" y="345">09</text>
                        <text class="district-label" x="440" y="365">Vijayanagara</text>
                    </g>
                    
                    <!-- West & Coastal Districts -->
                    <g data-district="belagavi" data-region="north" data-pattern="more-constituencies">
                        <path class="district" d="M 55,45 L 195,45 L 195,145 L 130,170 L 55,145 Z"/>
                        <text class="district-number" x="125" y="80">10</text>
                        <text class="district-label" x="125" y="105">Belagavi</text>
                    </g>
                    
                    <g data-district="uttara-kannada" data-region="coastal" data-pattern="more-taluks">
                        <path class="district" d="M 25,145 L 130,145 L 130,270 L 70,295 L 25,270 Z"/>
                        <text class="district-number" x="77" y="195">11</text>
                        <text class="district-label" x="77" y="220">U. Kannada</text>
                    </g>
                    
                    <g data-district="udupi" data-region="coastal" data-pattern="more-constituencies">
                        <path class="district" d="M 45,380 L 120,380 L 120,460 L 80,485 L 45,460 Z"/>
                        <text class="district-number" x="82" y="410">12</text>
                        <text class="district-label" x="82" y="432">Udupi</text>
                    </g>
                    
                    <g data-district="dakshina-kannada" data-region="coastal" data-pattern="more-constituencies">
                        <path class="district" d="M 55,460 L 130,460 L 130,550 L 90,575 L 55,550 Z"/>
                        <text class="district-number" x="92" y="495">13</text>
                        <text class="district-label" x="92" y="517">D. Kannada</text>
                    </g>
                    
                    <!-- Central Karnataka Districts -->
                    <g data-district="dharwad" data-region="central" data-pattern="more-constituencies">
                        <path class="district" d="M 130,170 L 215,170 L 215,245 L 165,270 L 130,245 Z"/>
                        <text class="district-number" x="172" y="200">14</text>
                        <text class="district-label" x="172" y="222">Dharwad</text>
                    </g>
                    
                    <g data-district="gadag" data-region="central" data-pattern="equal">
                        <path class="district" d="M 215,200 L 275,200 L 275,265 L 230,290 L 215,265 Z"/>
                        <text class="district-number" x="245" y="225">15</text>
                        <text class="district-label" x="245" y="247">Gadag</text>
                    </g>
                    
                    <g data-district="haveri" data-region="central" data-pattern="more-taluks">
                        <path class="district" d="M 165,245 L 235,245 L 235,310 L 195,335 L 165,310 Z"/>
                        <text class="district-number" x="200" y="270">16</text>
                        <text class="district-label" x="200" y="292">Haveri</text>
                    </g>
                    
                    <g data-district="shivamogga" data-region="central" data-pattern="equal">
                        <path class="district" d="M 130,280 L 235,280 L 235,365 L 175,390 L 130,365 Z"/>
                        <text class="district-number" x="182" y="315">17</text>
                        <text class="district-label" x="182" y="337">Shivamogga</text>
                    </g>
                    
                    <g data-district="chitradurga" data-region="central" data-pattern="more-taluks">
                        <path class="district" d="M 235,295 L 325,295 L 325,370 L 275,395 L 235,370 Z"/>
                        <text class="district-number" x="280" y="325">18</text>
                        <text class="district-label" x="280" y="347">Chitradurga</text>
                    </g>
                    
                    <g data-district="davanagere" data-region="central" data-pattern="more-constituencies">
                        <path class="district" d="M 235,365 L 315,365 L 315,435 L 265,460 L 235,435 Z"/>
                        <text class="district-number" x="275" y="393">19</text>
                        <text class="district-label" x="275" y="415">Davanagere</text>
                    </g>
                    
                    <g data-district="chikkamagaluru" data-region="central" data-pattern="equal">
                        <path class="district" d="M 130,365 L 235,365 L 235,445 L 175,470 L 130,445 Z"/>
                        <text class="district-number" x="182" y="395">20</text>
                        <text class="district-label" x="182" y="417">Chikkamagaluru</text>
                    </g>
                    
                    <g data-district="hassan" data-region="south" data-pattern="equal">
                        <path class="district" d="M 175,445 L 265,445 L 265,525 L 215,550 L 175,525 Z"/>
                        <text class="district-number" x="220" y="475">21</text>
                        <text class="district-label" x="220" y="497">Hassan</text>
                    </g>
                    
                    <g data-district="tumakuru" data-region="central" data-pattern="more-constituencies">
                        <path class="district" d="M 265,435 L 355,435 L 355,515 L 305,540 L 265,515 Z"/>
                        <text class="district-number" x="310" y="465">22</text>
                        <text class="district-label" x="310" y="487">Tumakuru</text>
                    </g>
                    
                    <!-- South Karnataka Districts -->
                    <g data-district="kodagu" data-region="south" data-pattern="more-taluks">
                        <path class="district" d="M 130,515 L 195,515 L 195,595 L 160,620 L 130,595 Z"/>
                        <text class="district-number" x="162" y="545">23</text>
                        <text class="district-label" x="162" y="567">Kodagu</text>
                    </g>
                    
                    <g data-district="mysuru" data-region="south" data-pattern="more-constituencies">
                        <path class="district" d="M 195,515 L 290,515 L 290,600 L 235,625 L 195,600 Z"/>
                        <text class="district-number" x="242" y="548">24</text>
                        <text class="district-label" x="242" y="570">Mysuru</text>
                    </g>
                    
                    <g data-district="mandya" data-region="south" data-pattern="equal">
                        <path class="district" d="M 235,525 L 305,525 L 305,595 L 265,620 L 235,595 Z"/>
                        <text class="district-number" x="270" y="552">25</text>
                        <text class="district-label" x="270" y="574">Mandya</text>
                    </g>
                    
                    <g data-district="chamarajanagara" data-region="south" data-pattern="equal">
                        <path class="district" d="M 215,595 L 290,595 L 290,675 L 245,700 L 215,675 Z"/>
                        <text class="district-number" x="252" y="625">26</text>
                        <text class="district-label" x="252" y="647">Chamarajanagara</text>
                    </g>
                    
                    <g data-district="ramanagara" data-region="south" data-pattern="equal">
                        <path class="district" d="M 290,535 L 355,535 L 355,605 L 315,630 L 290,605 Z"/>
                        <text class="district-number" x="322" y="562">27</text>
                        <text class="district-label" x="322" y="584">Ramanagara</text>
                    </g>
                    
                    <!-- Bengaluru Region Districts -->
                    <g data-district="bengaluru-urban" data-region="bengaluru" data-pattern="urban">
                        <path class="district" d="M 325,495 L 395,495 L 395,560 L 355,585 L 325,560 Z"/>
                        <text class="district-number" x="360" y="520">28</text>
                        <text class="district-label" x="360" y="542">B. Urban</text>
                    </g>
                    
                    <g data-district="bengaluru-rural" data-region="bengaluru" data-pattern="equal">
                        <path class="district" d="M 355,450 L 415,450 L 415,515 L 375,540 L 355,515 Z"/>
                        <text class="district-number" x="385" y="475">29</text>
                        <text class="district-label" x="385" y="497">B. Rural</text>
                    </g>
                    
                    <g data-district="kolar" data-region="bengaluru" data-pattern="equal">
                        <path class="district" d="M 395,450 L 465,450 L 465,525 L 415,550 L 395,525 Z"/>
                        <text class="district-number" x="430" y="480">30</text>
                        <text class="district-label" x="430" y="502">Kolar</text>
                    </g>
                    
                    <g data-district="chikkaballapura" data-region="bengaluru" data-pattern="equal">
                        <path class="district" d="M 395,385 L 465,385 L 465,450 L 425,475 L 395,450 Z"/>
                        <text class="district-number" x="430" y="410">31</text>
                        <text class="district-label" x="430" y="432">Chikkaballapura</text>
                    </g>
                </svg>
                
                <div class="info-text">
                    üñ±Ô∏è <strong>Hover</strong> over districts to preview data | üñ±Ô∏è <strong>Click</strong> to lock selection | Serial numbers indicate district position
                </div>
            </div>
            
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">District Details</div>
                    <div class="district-badge" id="district-badge">Select District</div>
                </div>
                <div id="district-info">
                    <p style="color: #666; text-align: center; margin-top: 50px; line-height: 2;">
                        <strong>No District Selected</strong><br><br>
                        Click or hover on any district from the map to view detailed administrative and electoral data<br><br>
                        ‚Ä¢ Taluk Information<br>
                        ‚Ä¢ Constituency Details<br>
                        ‚Ä¢ Mapping Patterns<br>
                        ‚Ä¢ Regional Classification
                    </p>
                </div>
            </div>
        </div>
        
        <div class="summary-cards">
            <div class="summary-card">
                <div class="card-title">Districts with 1:1 Mapping</div>
                <div class="card-stat">15</div>
                <div class="card-description">
                    These districts have equal number of taluks and constituencies, representing balanced administrative and electoral divisions.
                </div>
                <ul class="card-list">
                    <li>Bidar - 5 Taluks, 5 Constituencies</li>
                    <li>Ballari - 7 Taluks, 7 Constituencies</li>
                    <li>Gadag - 5 Taluks, 5 Constituencies</li>
                    <li>Bengaluru Rural - 4 Taluks, 4 Constituencies</li>
                    <li>Kolar - 5 Taluks, 5 Constituencies</li>
                </ul>
            </div>
            
            <div class="summary-card">
                <div class="card-title">Urban Split Districts</div>
                <div class="card-stat">5</div>
                <div class="card-description">
                    High-density urban areas where single taluks are divided into multiple constituencies to ensure equal voter representation.
                </div>
                <ul class="card-list">
                    <li>Bengaluru Urban - 4 Taluks ‚Üí 28 Constituencies</li>
                    <li>Mysuru - 7 Taluks ‚Üí 11 Constituencies</li>
                    <li>Belagavi - 15 Taluks ‚Üí 18 Constituencies</li>
                    <li>Dakshina Kannada - 5 Taluks ‚Üí 8 Constituencies</li>
                    <li>Dharwad - 5 Taluks ‚Üí 7 Constituencies</li>
                </ul>
            </div>
            
            <div class="summary-card">
                <div class="card-title">Rural Consolidation</div>
                <div class="card-stat">6</div>
                <div class="card-description">
                    Low-density rural areas where multiple taluks are combined into single constituencies due to lower population.
                </div>
                <ul class="card-list">
                    <li>Kodagu - 3 Taluks ‚Üí 1 Constituency</li>
                    <li>Uttara Kannada - 12 Taluks ‚Üí 6 Constituencies</li>
                    <li>Chitradurga - 6 Taluks ‚Üí 4 Constituencies</li>
                    <li>Haveri - 7 Taluks ‚Üí 6 Constituencies</li>
                </ul>
            </div>
        </div>
        
        <div class="insights-section">
            <div class="insights-title">Key Insights & Analysis</div>
            <div class="insights-grid">
                <div class="insight-item">
                    <div class="insight-number">01</div>
                    <div class="insight-title">Why the Numbers Don't Match</div>
                    <div class="insight-text">
                        Karnataka has 236 taluks but only 224 constituencies. This 12-unit difference exists because taluks are administrative units based on geography and governance needs, while constituencies are electoral units based on population equality. Each constituency must have roughly equal voters (~200,000) regardless of geographic size.
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-number">02</div>
                    <div class="insight-title">Urban vs Rural Patterns</div>
                    <div class="insight-text">
                        Urban districts like Bengaluru Urban (4 taluks ‚Üí 28 constituencies) split taluks into multiple constituencies due to high population density. Rural districts like Kodagu (3 taluks ‚Üí 1 constituency) combine taluks because of low population spread across large areas.
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-number">03</div>
                    <div class="insight-title">Delimitation Process</div>
                    <div class="insight-text">
                        Constituencies are redrawn after each census through delimitation commissions. The last delimitation was in 2008 based on 2001 census data. This ensures fair representation as population shifts between rural and urban areas over time.
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-number">04</div>
                    <div class="insight-title">Regional Variations</div>
                    <div class="insight-text">
                        North Karnataka (Belagavi, Kalaburagi, Vijayapura) shows more constituencies than taluks due to higher population density. Coastal Karnataka (Uttara Kannada, Udupi) shows the opposite pattern due to terrain and lower density.
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-number">05</div>
                    <div class="insight-title">Administrative Efficiency</div>
                    <div class="insight-text">
                        Taluks remain stable over decades for consistent revenue administration and land records. Constituencies change periodically to reflect demographic shifts, ensuring each vote carries equal weight in democracy.
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-number">06</div>
                    <div class="insight-title">No Missing Constituencies</div>
                    <div class="insight-text">
                        The difference of 12 (236-224) doesn't mean constituencies are "missing." It's the natural result of population-based constituency formation. Urban areas contribute +24 extra constituencies, while rural areas consolidate -12, creating the net difference.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="data-tables">
            <div class="table-header">
                <div class="table-title">Complete District Data</div>
                <div class="table-actions">
                    <button onclick="sortTable('name')">Sort by Name</button>
                    <button onclick="sortTable('taluks')">Sort by Taluks</button>
                    <button onclick="sortTable('constituencies')">Sort by Constituencies</button>
                </div>
            </div>
            
            <div class="table-wrapper">
                <table id="main-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>District Name</th>
                            <th>Region</th>
                            <th>Taluks</th>
                            <th>Constituencies</th>
                            <th>Difference</th>
                            <th>Pattern Type</th>
                            <th>Ratio</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Data will be inserted by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="methodology-section">
            <div class="methodology-title">Understanding the Data</div>
            <div class="methodology-content">
                <p>
                    This analysis is based on official data from the Karnataka State Government, Election Commission of India, and the 2008 Delimitation Commission report. Here's how the two systems work:
                </p>
                
                <ul class="methodology-list">
                    <li>
                        <strong>Taluks (Tehsils) - 236 Total</strong>
                        Administrative sub-divisions of districts created for revenue collection, land administration, and local governance. Headed by a Tehsildar (appointed official). Boundaries remain relatively stable over decades. Size based on geographic area and administrative convenience.
                    </li>
                    <li>
                        <strong>Assembly Constituencies - 224 Total</strong>
                        Electoral divisions for state legislature representation. Each constituency elects one MLA (Member of Legislative Assembly). Boundaries redrawn after census based on population data. Size varies geographically but population remains equal (~200,000 voters per constituency).
                    </li>
                    <li>
                        <strong>Why They Don't Match</strong>
                        These are independent systems serving different purposes. Taluks = administrative efficiency. Constituencies = electoral equality. The 12-unit difference arises naturally from population distribution: urban areas split into more constituencies while rural areas consolidate.
                    </li>
                    <li>
                        <strong>Delimitation Process</strong>
                        The Delimitation Commission, established under the Delimitation Act 2002, redrew all constituency boundaries in 2008 based on 2001 census data. The next delimitation is scheduled after 2026. This ensures fair representation as India's population shifts.
                    </li>
                </ul>
                
                <p style="margin-top: 30px;">
                    <strong>Data Sources:</strong> Karnataka State Government Official Records, Election Commission of India, Delimitation Commission of India Reports, Census of India 2011, Karnataka Administrative Service Documentation.
                </p>
            </div>
        </div>
        
        <footer>
            <p>Karnataka Administrative Structure Analysis | Data accurate as of 2025</p>
            <p style="margin-top: 10px;">Interactive visualization of 31 Districts, 236 Taluks, 224 Assembly Constituencies</p>
        </footer>
    </div>
    
    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeAllModals()"></div>
    
    <!-- Stats Modal -->
    <div class="modal" id="stats-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeStatsModal()">&times;</span>
            <div id="stats-modal-body"></div>
        </div>
    </div>
    
    <!-- Taluk Details Modal -->
    <div class="modal" id="taluk-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeTalukModal()">&times;</span>
            <div id="taluk-modal-body"></div>
        </div>
    </div>
    
    <!-- Constituency Details Modal -->
    <div class="modal" id="constituency-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeConstituencyModal()">&times;</span>
            <div id="constituency-modal-body"></div>
        </div>
    </div>
    
    <script>
        const districtData = {
            'belagavi': {
                serial: 10,
                name: 'Belagavi (Belgaum)',
                region: 'North Karnataka',
                taluks: 15,
                constituencies: 18,
                pattern: 'More Constituencies',
                description: 'Second largest district by area, highest population density in North Karnataka. Urban center with significant rural hinterland.',
                taluksList: ['Athani', 'Bailhongal', 'Belgaum', 'Chikkodi', 'Gokak', 'Hukkeri', 'Khanapur', 'Raibag', 'Ramdurg', 'Saundatti', 'Belgaum City', 'Mudalgi', 'Yemkanmardi', 'Kagwad', 'Kittur'],
                constituenciesList: ['Arabhavi', 'Athani', 'Bailahongal', 'Belgaum Dakshin', 'Belgaum Rural', 'Belgaum Uttar', 'Chikkodi-Sadalga', 'Gokak', 'Hukkeri', 'Kagwad', 'Khanapur', 'Kittur', 'Kudachi (SC)', 'Nippani', 'Ramdurg', 'Raybag (SC)', 'Saundatti Yellamma', 'Yemkanamardi (ST)']
            },
            'bagalkot': {
                serial: 5,
                name: 'Bagalkot',
                region: 'North Karnataka',
                taluks: 6,
                constituencies: 7,
                pattern: 'Balanced',
                description: 'Known for historical significance and Badami caves. Agricultural economy.',
                taluksList: ['Badami', 'Bagalkot', 'Bilgi', 'Hungund', 'Jamkhandi', 'Mudhol'],
                constituenciesList: ['Badami', 'Bagalkot', 'Bilgi', 'Hungund', 'Jamkhandi', 'Mudhol', 'Terdal']
            },
            'vijayapura': {
                serial: 4,
                name: 'Vijayapura (Bijapur)',
                region: 'North Karnataka',
                taluks: 5,
                constituencies: 8,
                pattern: 'Urban Concentration',
                description: 'Historic city with Gol Gumbaz and Adil Shahi monuments. Urban population center.',
                taluksList: ['Bijapur', 'Indi', 'Sindgi', 'Muddebihal', 'Basavana Bagewadi'],
                constituenciesList: ['Babaleshwar', 'Basavana Bagewadi', 'Bijapur City', 'Devara Hippargi', 'Indi', 'Muddebihal', 'Nagthan (SC)', 'Sindgi']
            },
            'bidar': {
                serial: 1,
                name: 'Bidar',
                region: 'North Karnataka',
                taluks: 5,
                constituencies: 5,
                pattern: '1:1 Mapping',
                description: 'Historic fort city, border district with Telangana and Maharashtra.',
                taluksList: ['Aurad', 'Basavakalyan', 'Bhalki', 'Bidar', 'Humnabad'],
                constituenciesList: ['Aurad', 'Basavakalyan', 'Bhalki', 'Bidar', 'Humnabad']
            },
            'kalaburagi': {
                serial: 2,
                name: 'Kalaburagi (Gulbarga)',
                region: 'North Karnataka',
                taluks: 7,
                constituencies: 9,
                pattern: 'Urban-Rural Mix',
                description: 'Divisional headquarters, educational hub with AIIMS and multiple universities.',
                taluksList: ['Afzalpur', 'Aland', 'Chincholi', 'Chittapur', 'Gulbarga', 'Jevargi', 'Sedam'],
                constituenciesList: ['Afzalpur', 'Aland', 'Chincholi (SC)', 'Chittapur (SC)', 'Gulbarga Dakshin', 'Gulbarga Rural (SC)', 'Gulbarga Uttar', 'Jevargi', 'Sedam']
            },
            'yadgir': {
                serial: 3,
                name: 'Yadgir',
                region: 'North Karnataka',
                taluks: 3,
                constituencies: 3,
                pattern: '1:1 Mapping',
                description: 'Newest district carved from Kalaburagi in 2010. Predominantly agricultural.',
                taluksList: ['Shahapur', 'Shorapur', 'Yadgir'],
                constituenciesList: ['Gurmitkal', 'Shahapur', 'Shorapur (ST)']
            },
            'raichur': {
                serial: 6,
                name: 'Raichur',
                region: 'North Karnataka',
                taluks: 5,
                constituencies: 7,
                pattern: 'Population Split',
                description: 'Major agricultural and industrial center, thermal power plants.',
                taluksList: ['Devadurga', 'Lingsugur', 'Manvi', 'Raichur', 'Sindhanur'],
                constituenciesList: ['Devadurga (ST)', 'Lingsugur (SC)', 'Manvi (ST)', 'Maski (ST)', 'Raichur', 'Raichur Rural (ST)', 'Sindhanur']
            },
            'koppal': {
                serial: 7,
                name: 'Koppal',
                region: 'Central Karnataka',
                taluks: 4,
                constituencies: 5,
                pattern: 'Balanced',
                description: 'Ancient Jain and Buddhist heritage site, agricultural district.',
                taluksList: ['Koppal', 'Kushtagi', 'Gangavathi', 'Yelburga'],
                constituenciesList: ['Koppal', 'Gangavathi', 'Kanakagiri', 'Kushtagi', 'Yelburga']
            },
            'ballari': {
                serial: 8,
                name: 'Ballari (Bellary)',
                region: 'Central Karnataka',
                taluks: 7,
                constituencies: 7,
                pattern: '1:1 Mapping',
                description: 'Rich in iron ore and minerals, industrial hub near Hampi World Heritage Site.',
                taluksList: ['Bellary', 'Hadagali', 'Hagaribommanahalli', 'Hospet', 'Kampli', 'Kudligi', 'Sandur'],
                constituenciesList: ['Bellary City', 'Hadagali', 'Hagaribommanahalli', 'Hospet', 'Kampli (ST)', 'Kudligi', 'Sandur (ST)']
            },
            'vijayanagara': {
                serial: 9,
                name: 'Vijayanagara',
                region: 'Central Karnataka',
                taluks: 4,
                constituencies: 4,
                pattern: '1:1 Mapping',
                description: 'Newest district (2020) carved from Ballari, includes Hampi UNESCO site.',
                taluksList: ['Hosapete', 'Hagaribommanahalli', 'Hoovina Hadagali', 'Kottur'],
                constituenciesList: ['Hospet', 'Hagaribommanahalli', 'Hadagali', 'Kampli']
            },
            'dharwad': {
                serial: 14,
                name: 'Dharwad',
                region: 'Central Karnataka',
                taluks: 5,
                constituencies: 7,
                pattern: 'Urban Concentration',
                description: 'Educational and cultural center, twin city Hubli-Dharwad is major urban agglomeration.',
                taluksList: ['Dharwad', 'Hubli', 'Kalghatagi', 'Kundgol', 'Navalgund'],
                constituenciesList: ['Dharwad', 'Hubli-Dharwad-Central', 'Hubli-Dharwad-East (SC)', 'Hubli-Dharwad-West', 'Kalaghatgi', 'Kundgol', 'Navalgund']
            },
            'gadag': {
                serial: 15,
                name: 'Gadag',
                region: 'Central Karnataka',
                taluks: 5,
                constituencies: 5,
                pattern: '1:1 Mapping',
                description: 'Industrial town known for cotton and textile manufacturing.',
                taluksList: ['Gadag', 'Mundargi', 'Nargund', 'Ron', 'Shirhatti'],
                constituenciesList: ['Gadag', 'Mundargi', 'Nargund', 'Ron', 'Shirhatti']
            },
            'haveri': {
                serial: 16,
                name: 'Haveri',
                region: 'Central Karnataka',
                taluks: 7,
                constituencies: 6,
                pattern: 'Rural Consolidation',
                description: 'Agricultural district with handloom industry.',
                taluksList: ['Byadgi', 'Hanagal', 'Haveri', 'Hirekerur', 'Ranebennur', 'Savanur', 'Shiggaon'],
                constituenciesList: ['Byadgi', 'Hangal', 'Haveri (SC)', 'Hirekerur', 'Ranebennur', 'Shiggaon']
            },
            'uttara-kannada': {
                serial: 11,
                name: 'Uttara Kannada',
                region: 'Coastal Karnataka',
                taluks: 12,
                constituencies: 6,
                pattern: 'Large Area Low Density',
                description: 'Largest coastal district, dense forests, low population density, eco-sensitive zone.',
                taluksList: ['Ankola', 'Bhatkal', 'Dandeli', 'Haliyal', 'Honnavar', 'Joida', 'Karwar', 'Kumta', 'Mundgod', 'Siddapur', 'Sirsi', 'Yellapur'],
                constituenciesList: ['Bhatkal', 'Haliyal', 'Karwar', 'Kumta', 'Sirsi', 'Yellapur']
            },
            'udupi': {
                serial: 12,
                name: 'Udupi',
                region: 'Coastal Karnataka',
                taluks: 3,
                constituencies: 5,
                pattern: 'Coastal Urban',
                description: 'Temple town, educational hub (Manipal), coastal tourism and fishing.',
                taluksList: ['Udupi', 'Kundapura', 'Karkala'],
                constituenciesList: ['Udupi', 'Kaup', 'Kundapura', 'Karkala', 'Byndoor']
            },
            'dakshina-kannada': {
                serial: 13,
                name: 'Dakshina Kannada',
                region: 'Coastal Karnataka',
                taluks: 5,
                constituencies: 8,
                pattern: 'Coastal Urban',
                description: 'Mangaluru city, major port, industrial corridor, banking sector hub.',
                taluksList: ['Bantwal', 'Belthangady', 'Mangalore', 'Puttur', 'Sullia'],
                constituenciesList: ['Bantwal', 'Belthangady', 'Mangalore', 'Mangalore City North', 'Mangalore City South', 'Moodabidri', 'Puttur', 'Sullia (SC)']
            },
            'shivamogga': {
                serial: 17,
                name: 'Shivamogga (Shimoga)',
                region: 'Central Karnataka',
                taluks: 7,
                constituencies: 7,
                pattern: '1:1 Mapping',
                description: 'Gateway to Malnad, Jog Falls, areca nut cultivation center.',
                taluksList: ['Bhadravathi', 'Hosanagar', 'Sagar', 'Shikaripura', 'Shivamogga', 'Sorab', 'Thirthahalli'],
                constituenciesList: ['Bhadravathi', 'Hosanagar', 'Sagar', 'Shikaripura', 'Shivamogga', 'Sorab', 'Thirthahalli']
            },
            'chitradurga': {
                serial: 18,
                name: 'Chitradurga',
                region: 'Central Karnataka',
                taluks: 6,
                constituencies: 4,
                pattern: 'Rural Consolidation',
                description: 'Historic fort, arid region, known for Kallina Kote (stone fort).',
                taluksList: ['Challakere', 'Chitradurga', 'Hiriyur', 'Holalkere', 'Hosadurga', 'Molakalmuru'],
                constituenciesList: ['Challakere', 'Chitradurga', 'Hiriyur', 'Holalkere']
            },
            'davanagere': {
                serial: 19,
                name: 'Davanagere',
                region: 'Central Karnataka',
                taluks: 6,
                constituencies: 7,
                pattern: 'Urban-Rural Mix',
                description: 'Cotton city, textile hub, industrial center.',
                taluksList: ['Channagiri', 'Davanagere', 'Harihara', 'Harapanahalli', 'Honnali', 'Jagalur'],
                constituenciesList: ['Channagiri', 'Davanagere North', 'Davanagere South', 'Harihar', 'Harapanahalli', 'Honnali', 'Jagalur (ST)']
            },
            'chikkamagaluru': {
                serial: 20,
                name: 'Chikkamagaluru',
                region: 'Central Karnataka',
                taluks: 7,
                constituencies: 7,
                pattern: '1:1 Mapping',
                description: 'Coffee land of Karnataka, hill station, birthplace of Indian coffee.',
                taluksList: ['Ajjampura', 'Chikkamagaluru', 'Kadur', 'Koppa', 'Mudigere', 'Narasimharajapura', 'Tarikere'],
                constituenciesList: ['Ajjampura', 'Chikkamagaluru', 'Kadur', 'Koppa', 'Mudigere', 'Narasimharajapura', 'Tarikere']
            },
            'hassan': {
                serial: 21,
                name: 'Hassan',
                region: 'South Karnataka',
                taluks: 8,
                constituencies: 8,
                pattern: '1:1 Mapping',
                description: 'Temple architecture hub, Hoysala temples at Belur and Halebidu.',
                taluksList: ['Alur', 'Arkalgud', 'Arsikere', 'Belur', 'Channarayapatna', 'Hassan', 'Holenarasipura', 'Sakleshpur'],
                constituenciesList: ['Alur', 'Arkalgud', 'Arsikere', 'Belur', 'Channarayapatna', 'Hassan', 'Holenarasipura', 'Sakleshpur']
            },
            'tumakuru': {
                serial: 22,
                name: 'Tumakuru (Tumkur)',
                region: 'Central Karnataka',
                taluks: 10,
                constituencies: 11,
                pattern: 'Nearly Balanced',
                description: 'Coconut city, educational hub, proximity to Bengaluru.',
                taluksList: ['Chiknayakanhalli', 'Gubbi', 'Koratagere', 'Kunigal', 'Madhugiri', 'Pavagada', 'Sira', 'Tiptur', 'Tumakuru', 'Turuvekere'],
                constituenciesList: ['Chiknayakanhalli', 'Gubbi', 'Koratagere (SC)', 'Kunigal', 'Madhugiri', 'Pavagada (SC)', 'Sira', 'Tiptur', 'Tumakuru City', 'Tumakuru Rural', 'Turuvekere']
            },
            'kodagu': {
                serial: 23,
                name: 'Kodagu (Coorg)',
                region: 'South Karnataka',
                taluks: 3,
                constituencies: 1,
                pattern: 'Rural Low Population',
                description: 'Scotland of India, coffee and spice plantations, lowest population district.',
                taluksList: ['Madikeri', 'Somwarpet', 'Virajpet'],
                constituenciesList: ['Virajpet']
            },
            'mysuru': {
                serial: 24,
                name: 'Mysuru (Mysore)',
                region: 'South Karnataka',
                taluks: 7,
                constituencies: 11,
                pattern: 'Urban Split',
                description: 'Cultural capital, Mysore Palace, heritage city, Dasara festival.',
                taluksList: ['H.D. Kote', 'Hunsur', 'K.R. Nagar', 'Mysuru', 'Nanjangud', 'Periyapatna', 'T. Narasipura'],
                constituenciesList: ['Chamaraja', 'Chamundeshwari', 'Heggadadevankote (ST)', 'Hunsur', 'Krishnaraja', 'Krishnarajanagara', 'Nanjangud (SC)', 'Narasimharaja', 'Periyapatna', 'T. Narasipura (SC)', 'Varuna']
            },
            'mandya': {
                serial: 25,
                name: 'Mandya',
                region: 'South Karnataka',
                taluks: 7,
                constituencies: 7,
                pattern: '1:1 Mapping',
                description: 'Sugar bowl of Karnataka, Cauvery river basin, agricultural prosperity.',
                taluksList: ['Krishnarajpet', 'Maddur', 'Malavalli', 'Mandya', 'Nagamangala', 'Pandavapura', 'Shrirangapattana'],
                constituenciesList: ['Krishnarajpet', 'Maddur', 'Malavalli', 'Mandya', 'Melukote', 'Nagamangala', 'Srirangapattana']
            },
            'chamarajanagara': {
                serial: 26,
                name: 'Chamarajanagara',
                region: 'South Karnataka',
                taluks: 4,
                constituencies: 4,
                pattern: '1:1 Mapping',
                description: 'Border district with Tamil Nadu, wildlife sanctuaries.',
                taluksList: ['Chamarajanagara', 'Gundlupet', 'Kollegal', 'Yelandur'],
                constituenciesList: ['Chamarajanagara', 'Gundlupet', 'Kollegal', 'Hanur']
            },
            'ramanagara': {
                serial: 27,
                name: 'Ramanagara',
                region: 'South Karnataka',
                taluks: 4,
                constituencies: 4,
                pattern: '1:1 Mapping',
                description: 'Silk cocoon market, film city (Sholay shooting location), sericulture.',
                taluksList: ['Channapatna', 'Kanakapura', 'Magadi', 'Ramanagara'],
                constituenciesList: ['Channapatna', 'Kanakapura', 'Magadi', 'Ramanagara']
            },
            'bengaluru-urban': {
                serial: 28,
                name: 'Bengaluru Urban',
                region: 'Bengaluru Metropolitan',
                taluks: 4,
                constituencies: 28,
                pattern: 'Extreme Urban Split',
                description: 'State capital, IT hub, highest urban density, single city divided into 28 constituencies.',
                taluksList: ['Anekal', 'Bengaluru East', 'Bengaluru North', 'Bengaluru South'],
                constituenciesList: ['Anekal (SC)', 'Bangalore South', 'Basavanagudi', 'Bommanahalli', 'BTM Layout', 'Byatarayanapura', 'CV Raman Nagar (SC)', 'Chamrajpet', 'Chickpet', 'Dasarahalli', 'Gandhinagar', 'Govindaraja Nagar', 'Hebbal', 'Jayanagar', 'KR Pura', 'Mahalakshmi Layout', 'Mahadevapura (SC)', 'Malleshwaram', 'Padmanabhanagar', 'Pulakeshinagar (SC)', 'Rajaji Nagar', 'Rajarajeshwari Nagar', 'Sarvagnanagar', 'Shanti Nagar', 'Shivaji Nagar', 'Vijayanagar', 'Yelahanka', 'Yeshwantpur']
            },
            'bengaluru-rural': {
                serial: 29,
                name: 'Bengaluru Rural',
                region: 'Bengaluru Metropolitan',
                taluks: 4,
                constituencies: 4,
                pattern: '1:1 Mapping',
                description: 'Satellite towns around Bengaluru, residential and industrial growth.',
                taluksList: ['Devanahalli', 'Doddaballapur', 'Hosakote', 'Nelamangala'],
                constituenciesList: ['Devanahalli', 'Doddaballapur', 'Hosakote', 'Nelamangala']
            },
            'kolar': {
                serial: 30,
                name: 'Kolar',
                region: 'Bengaluru Metropolitan',
                taluks: 5,
                constituencies: 5,
                pattern: '1:1 Mapping',
                description: 'Kolar Gold Fields (KGF), historic gold mining region.',
                taluksList: ['Bangarapet', 'Kolar', 'Malur', 'Mulbagal', 'Srinivaspur'],
                constituenciesList: ['Bangarapet', 'Kolar', 'Malur', 'Mulbagal', 'KGF']
            },
            'chikkaballapura': {
                serial: 31,
                name: 'Chikkaballapura',
                region: 'Bengaluru Metropolitan',
                taluks: 6,
                constituencies: 6,
                pattern: '1:1 Mapping',
                description: 'Silk industry, Nandi Hills hill station, growing residential area.',
                taluksList: ['Bagepalli', 'Chikkaballapur', 'Chintamani', 'Gauribidanur', 'Gowribidanur', 'Sidlaghatta'],
                constituenciesList: ['Bagepalli', 'Chikkaballapura', 'Chintamani', 'Gauribidanur', 'Gudibanda', 'Sidlaghatta']
            }
        };
        
        let selectedDistrict = null;
        let currentSort = 'serial';
        let currentDistrictKey = null;
        
        function getRegionName(region) {
            const regionMap = {
                'north': 'North Karnataka',
                'south': 'South Karnataka',
                'coastal': 'Coastal Karnataka',
                'central': 'Central Karnataka',
                'bengaluru': 'Bengaluru Region'
            };
            return regionMap[region] || region;
        }
        
        function displayDistrictInfo(districtKey) {
            const data = districtData[districtKey];
            const infoDiv = document.getElementById('district-info');
            const badge = document.getElementById('district-badge');
            
            currentDistrictKey = districtKey;
            badge.textContent = `#${data.serial.toString().padStart(2, '0')}`;
            
            const difference = data.constituencies - data.taluks;
            const diffText = difference > 0 ? `+${difference}` : difference;
            const ratio = (data.taluks / data.constituencies).toFixed(3);
            let ratioText = '';
            
            if (ratio > 1) {
                ratioText = `${ratio} taluks per constituency`;
            } else if (ratio < 1) {
                ratioText = `${(1/ratio).toFixed(2)} constituencies per taluk`;
            } else {
                ratioText = 'Perfect 1:1 balance';
            }
            
            const taluksPercent = (data.taluks / (data.taluks + data.constituencies)) * 100;
            const constituenciesPercent = 100 - taluksPercent;
            
            infoDiv.innerHTML = `
                <div class="district-name-big">${data.name}</div>
                <div class="district-serial">District #${data.serial} of 31 | ${data.region}</div>
                
                <div class="data-section">
                    <div class="section-title">Core Statistics</div>
                    <div class="data-grid">
                        <div class="data-item" onclick="showTaluks('${districtKey}')">
                            <div class="data-label">Total Taluks</div>
                            <div class="data-value">${data.taluks}</div>
                            <div class="data-subtext">Click for full list</div>
                        </div>
                        <div class="data-item" onclick="showConstituencies('${districtKey}')">
                            <div class="data-label">Constituencies</div>
                            <div class="data-value">${data.constituencies}</div>
                            <div class="data-subtext">Click for full list</div>
                        </div>
                    </div>
                    
                    <div class="comparison-section">
                        <div class="comparison-bar">
                            <div class="comparison-part taluks-bar" style="width: ${taluksPercent}%">
                                ${data.taluks} Taluks
                            </div>
                            <div class="comparison-part constituencies-bar" style="width: ${constituenciesPercent}%">
                                ${data.constituencies} Constituencies
                            </div>
                        </div>
                    </div>
                    
                    <div class="pattern-type">
                        <strong>Difference:</strong> ${diffText} | <strong>Pattern:</strong> ${data.pattern}<br>
                        <strong>Ratio:</strong> ${ratioText}
                    </div>
                </div>
                
                <div class="data-section">
                    <div class="section-title">About This District</div>
                    <div class="info-box">
                        <div class="info-box-text">${data.description}</div>
                    </div>
                </div>
            `;
        }
        
        function showTaluks(districtKey) {
            const data = districtData[districtKey];
            const modal = document.getElementById('taluk-modal');
            const modalBody = document.getElementById('taluk-modal-body');
            
            let taluksList = data.taluksList.map(taluk => 
                `<li onclick="showTalukDetails('${districtKey}', '${taluk}')">
                    <span class="modal-list-main">${taluk}</span>
                    <span class="modal-list-detail">Click for detailed information ‚Üí</span>
                </li>`
            ).join('');
            
            modalBody.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${data.taluks} Taluks in ${data.name}</h2>
                    <p class="modal-subtitle">Administrative sub-divisions for revenue and governance. Click any taluk for details.</p>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h3 class="modal-section-title">Complete Taluk List</h3>
                        <ul class="modal-list">${taluksList}</ul>
                    </div>
                </div>
            `;
            
            document.getElementById('modal-overlay').classList.add('active');
            modal.classList.add('active');
        }
        
        function showConstituencies(districtKey) {
            const data = districtData[districtKey];
            const modal = document.getElementById('constituency-modal');
            const modalBody = document.getElementById('constituency-modal-body');
            
            let constituenciesList = data.constituenciesList.map(constituency => 
                `<li onclick="showConstituencyDetails('${districtKey}', '${constituency}')">
                    <span class="modal-list-main">${constituency}</span>
                    <span class="modal-list-detail">Click for electoral information ‚Üí</span>
                </li>`
            ).join('');
            
            modalBody.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${data.constituencies} Constituencies in ${data.name}</h2>
                    <p class="modal-subtitle">Electoral divisions for state legislature. Each elects one MLA.</p>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h3 class="modal-section-title">Complete Constituency List</h3>
                        <ul class="modal-list">${constituenciesList}</ul>
                    </div>
                </div>
            `;
            
            document.getElementById('modal-overlay').classList.add('active');
            modal.classList.add('active');
        }
        
        function showTalukDetails(districtKey, talukName) {
            const modal = document.getElementById('taluk-modal');
            const modalBody = document.getElementById('taluk-modal-body');
            const district = districtData[districtKey];
            
            modalBody.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${talukName} Taluk</h2>
                    <p class="modal-subtitle">${district.name} District | Administrative Unit</p>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h3 class="modal-section-title">Administrative Information</h3>
                        <div class="highlight-box">
                            <h3>Key Details</h3>
                            <p>${talukName} is one of ${district.taluks} taluks in ${district.name}. It serves as a crucial administrative unit for revenue collection, land records management (RTC/pahani), and local governance. The Tehsildar office handles property documentation, farmer services, and various civil administrative functions.</p>
                        </div>
                    </div>
                    <div class="modal-section">
                        <h3 class="modal-section-title">Functions & Services</h3>
                        <ul class="modal-list">
                            <li><span class="modal-list-main">Revenue Administration</span><span class="modal-list-detail">Land revenue collection, property tax assessment, and local taxation</span></li>
                            <li><span class="modal-list-main">Land Records</span><span class="modal-list-detail">Maintaining Record of Rights (RTC), mutation records, and ownership documents</span></li>
                            <li><span class="modal-list-main">Development Programs</span><span class="modal-list-detail">Implementation of government schemes, rural development, and infrastructure projects</span></li>
                            <li><span class="modal-list-main">Judicial Functions</span><span class="modal-list-detail">Civil courts, magistrate courts, and local legal administration</span></li>
                        </ul>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }
        
        function showConstituencyDetails(districtKey, constituencyName) {
            const modal = document.getElementById('constituency-modal');
            const modalBody = document.getElementById('constituency-modal-body');
            const district = districtData[districtKey];
            
            const isReserved = constituencyName.includes('(SC)') || constituencyName.includes('(ST)');
            const reservedType = constituencyName.includes('(SC)') ? 'Scheduled Caste' : constituencyName.includes('(ST)') ? 'Scheduled Tribe' : 'General';
            
            modalBody.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${constituencyName}</h2>
                    <p class="modal-subtitle">${district.name} District | Karnataka Legislative Assembly Constituency</p>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h3 class="modal-section-title">Electoral Information</h3>
                        <div class="modal-stats-grid">
                            <div class="modal-stat-box">
                                <div class="modal-stat-value">~2L</div>
                                <div class="modal-stat-label">Estimated Voters</div>
                            </div>
                            <div class="modal-stat-box">
                                <div class="modal-stat-value">1</div>
                                <div class="modal-stat-label">MLA Seat</div>
                            </div>
                            <div class="modal-stat-box">
                                <div class="modal-stat-value">2023</div>
                                <div class="modal-stat-label">Last Election</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-section">
                        <h3 class="modal-section-title">About This Constituency</h3>
                        <div class="highlight-box">
                            <h3>Electoral Significance</h3>
                            <p>${constituencyName} is one of ${district.constituencies} assembly constituencies in ${district.name}. Each constituency is designed to have approximately equal number of voters (around 200,000) to ensure fair representation. The elected Member of Legislative Assembly (MLA) represents this constituency in the Karnataka Vidhan Sabha.</p>
                        </div>
                        <div class="info-box">
                            <div class="info-box-title">Reservation Status</div>
                            <div class="info-box-text">
                                ${reservedType === 'General' ? 
                                    'This is a General constituency open to candidates from all communities.' : 
                                    `This constituency is reserved for ${reservedType} candidates as per constitutional provisions to ensure representation for marginalized communities.`}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }
        
        function showStatsModal(type) {
            const modal = document.getElementById('stats-modal');
            const overlay = document.getElementById('modal-overlay');
            const modalBody = document.getElementById('stats-modal-body');
            
            const contents = {
                'districts': `
                    <div class="modal-header">
                        <h2 class="modal-title">31 Districts of Karnataka</h2>
                        <p class="modal-subtitle">Organized into 4 administrative divisions for efficient governance across diverse geographic and demographic regions</p>
                    </div>
                    <div class="modal-body">
                        <div class="modal-section">
                            <h3 class="modal-section-title">Division-wise Distribution</h3>
                            <div class="modal-stats-grid">
                                <div class="modal-stat-box"><div class="modal-stat-value">7</div><div class="modal-stat-label">Belagavi Division</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">8</div><div class="modal-stat-label">Kalaburagi Division</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">7</div><div class="modal-stat-label">Mysuru Division</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">9</div><div class="modal-stat-label">Bengaluru Division</div></div>
                            </div>
                        </div>
                        <div class="modal-section">
                            <h3 class="modal-section-title">Regional Classification</h3>
                            <div class="info-cards-grid">
                                <div class="info-card">
                                    <div class="info-card-title">North Karnataka (9 districts)</div>
                                    <div class="info-card-content">Belagavi, Bagalkot, Vijayapura, Bidar, Kalaburagi, Yadgir, Raichur. Known for black soil agriculture and historical significance.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Coastal Karnataka (3 districts)</div>
                                    <div class="info-card-content">Uttara Kannada, Udupi, Dakshina Kannada. Western Ghats meet Arabian Sea, high rainfall, fishing, and port activities.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Central Karnataka (11 districts)</div>
                                    <div class="info-card-content">Dharwad, Gadag, Haveri, Bellary, Koppal, Shivamogga, Chitradurga, Davanagere. Transitional zone with diverse economy.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">South Karnataka (4 districts)</div>
                                    <div class="info-card-content">Mysuru, Mandya, Chamarajanagara, Hassan. Malnad region with coffee plantations and cultural heritage.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Bengaluru Region (4 districts)</div>
                                    <div class="info-card-content">Bengaluru Urban, Bengaluru Rural, Kolar, Chikkaballapura. IT hub and fastest growing metropolitan region.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'taluks': `
                    <div class="modal-header">
                        <h2 class="modal-title">236 Taluks Across Karnataka</h2>
                        <p class="modal-subtitle">Administrative sub-divisions for revenue collection, land records, and local governance</p>
                    </div>
                    <div class="modal-body">
                        <div class="modal-section">
                            <h3 class="modal-section-title">Purpose & Functions</h3>
                            <div class="info-cards-grid">
                                <div class="info-card">
                                    <div class="info-card-title">Revenue Administration</div>
                                    <div class="info-card-content">Taluks serve as the primary unit for land revenue collection, property tax assessment, and maintaining land records (RTC/pahani). The Tehsildar office is crucial for farmers and landowners.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Development Planning</div>
                                    <div class="info-card-content">Taluks are the unit for implementing government schemes, rural development programs, and infrastructure projects.</div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-section">
                            <h3 class="modal-section-title">Distribution Statistics</h3>
                            <div class="modal-stats-grid">
                                <div class="modal-stat-box"><div class="modal-stat-value">15</div><div class="modal-stat-label">Most Taluks<br>(Belagavi)</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">3</div><div class="modal-stat-label">Least Taluks<br>(Multiple)</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">7.6</div><div class="modal-stat-label">Average per District</div></div>
                            </div>
                        </div>
                    </div>
                `,
                'constituencies': `
                    <div class="modal-header">
                        <h2 class="modal-title">224 Assembly Constituencies</h2>
                        <p class="modal-subtitle">Electoral divisions for Karnataka Legislative Assembly based on population equality</p>
                    </div>
                    <div class="modal-body">
                        <div class="modal-section">
                            <h3 class="modal-section-title">Electoral Framework</h3>
                            <div class="modal-stats-grid">
                                <div class="modal-stat-box"><div class="modal-stat-value">224</div><div class="modal-stat-label">Total Seats</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">36</div><div class="modal-stat-label">Reserved for SC</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">15</div><div class="modal-stat-label">Reserved for ST</div></div>
                            </div>
                        </div>
                        <div class="modal-section">
                            <h3 class="modal-section-title">Why 224 and not 236?</h3>
                            <div class="highlight-box">
                                <h3>Population-Based Delimitation</h3>
                                <p>Constituencies are drawn based on population equality (~200,000 voters each), not administrative units. Urban Bengaluru has 28 constituencies from 4 taluks, while rural Kodagu has 1 constituency from 3 taluks. The 12-unit difference arises from urban areas (+24) and rural consolidation (-12).</p>
                            </div>
                        </div>
                    </div>
                `,
                'loksabha': `
                    <div class="modal-header">
                        <h2 class="modal-title">28 Lok Sabha Parliamentary Constituencies</h2>
                        <p class="modal-subtitle">Karnataka sends 28 MPs to the Lok Sabha (Lower House of Indian Parliament)</p>
                    </div>
                    <div class="modal-body">
                        <div class="modal-section">
                            <h3 class="modal-section-title">Overview</h3>
                            <div class="modal-stats-grid">
                                <div class="modal-stat-box"><div class="modal-stat-value">28</div><div class="modal-stat-label">Total LS Seats</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">4</div><div class="modal-stat-label">Reserved for SC</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">2</div><div class="modal-stat-label">Reserved for ST</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">8</div><div class="modal-stat-label">Assembly per LS</div></div>
                            </div>
                        </div>
                        <div class="modal-section">
                            <h3 class="modal-section-title">Structure</h3>
                            <div class="highlight-box">
                                <h3>Nested Constituencies</h3>
                                <p>Each Lok Sabha seat combines 7-9 assembly constituencies. This ensures MPs represent larger geographic areas than MLAs while maintaining population-based representation.</p>
                            </div>
                        </div>
                    </div>
                `,
                'divisions': `
                    <div class="modal-header">
                        <h2 class="modal-title">4 Administrative Divisions</h2>
                        <p class="modal-subtitle">Karnataka is divided into 4 administrative divisions headed by Divisional Commissioners</p>
                    </div>
                    <div class="modal-body">
                        <div class="modal-section">
                            <h3 class="modal-section-title">Division Details</h3>
                            <div class="info-cards-grid">
                                <div class="info-card">
                                    <div class="info-card-title">Belagavi Division (7 districts)</div>
                                    <div class="info-card-content">Belagavi, Bagalkot, Vijayapura, Dharwad, Gadag, Haveri, Uttara Kannada. Mix of coastal and plains. Commercial hub.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Kalaburagi Division (8 districts)</div>
                                    <div class="info-card-content">Kalaburagi, Bidar, Yadgir, Raichur, Koppal, Ballari, Vijayanagara. Agricultural and mining region.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Mysuru Division (7 districts)</div>
                                    <div class="info-card-content">Mysuru, Mandya, Hassan, Chamarajanagara, Kodagu. Cultural capital with tourism.</div>
                                </div>
                                <div class="info-card">
                                    <div class="info-card-title">Bengaluru Division (9 districts)</div>
                                    <div class="info-card-content">Bengaluru Urban/Rural, Ramanagara, Kolar, Chikkaballapura, Tumakuru. IT hub.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                'area': `
                    <div class="modal-header">
                        <h2 class="modal-title">1,91,791 sq km Total Area</h2>
                        <p class="modal-subtitle">Karnataka is the 6th largest state in India by geographic area</p>
                    </div>
                    <div class="modal-body">
                        <div class="modal-section">
                            <h3 class="modal-section-title">Geographic Statistics</h3>
                            <div class="modal-stats-grid">
                                <div class="modal-stat-box"><div class="modal-stat-value">1.91</div><div class="modal-stat-label">Lakh sq km<br>Total Area</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">5.83%</div><div class="modal-stat-label">Of India's Area</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">320</div><div class="modal-stat-label">Coastline km</div></div>
                                <div class="modal-stat-box"><div class="modal-stat-value">19%</div><div class="modal-stat-label">Forest Cover</div></div>
                            </div>
                        </div>
                        <div class="modal-section">
                            <h3 class="modal-section-title">Geographic Diversity</h3>
                            <div class="highlight-box">
                                <h3>Four Distinct Regions</h3>
                                <p>Coastal Karavali (320 km Arabian Sea coastline), Malnad (Western Ghats with heavy rainfall), Maidan (plateau region), and North Karnataka Plains (semi-arid). This diversity creates varied climates, crops, and cultures across the state.</p>
                            </div>
                        </div>
                    </div>
                `
            };
            
            modalBody.innerHTML = contents[type] || '';
            overlay.classList.add('active');
            modal.classList.add('active');
        }
        
        function closeStatsModal() {
            document.getElementById('stats-modal').classList.remove('active');
            document.getElementById('modal-overlay').classList.remove('active');
        }
        
        function closeTalukModal() {
            document.getElementById('taluk-modal').classList.remove('active');
            if (!document.getElementById('constituency-modal').classList.contains('active')) {
                document.getElementById('modal-overlay').classList.remove('active');
            }
        }
        
        function closeConstituencyModal() {
            document.getElementById('constituency-modal').classList.remove('active');
            if (!document.getElementById('taluk-modal').classList.contains('active')) {
                document.getElementById('modal-overlay').classList.remove('active');
            }
        }
        
        function closeAllModals() {
            closeStatsModal();
            closeTalukModal();
            closeConstituencyModal();
        }
        
        function populateTable() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = '';
            
            const sortedDistricts = Object.entries(districtData).sort((a, b) => {
                if (currentSort === 'serial') {
                    return a[1].serial - b[1].serial;
                } else if (currentSort === 'name') {
                    return a[1].name.localeCompare(b[1].name);
                } else if (currentSort === 'taluks') {
                    return b[1].taluks - a[1].taluks;
                } else if (currentSort === 'constituencies') {
                    return b[1].constituencies - a[1].constituencies;
                }
                return 0;
            });
            
            sortedDistricts.forEach(([key, data]) => {
                const row = tableBody.insertRow();
                const difference = data.constituencies - data.taluks;
                const diffText = difference > 0 ? `+${difference}` : difference;
                const ratio = (data.taluks / data.constituencies).toFixed(2);
                
                row.innerHTML = `
                    <td class="table-number">${data.serial}</td>
                    <td class="highlight">${data.name}</td>
                    <td>${data.region}</td>
                    <td>${data.taluks}</td>
                    <td>${data.constituencies}</td>
                    <td style="color: ${difference > 0 ? '#6f6' : difference < 0 ? '#f66' : '#fff'}">${diffText}</td>
                    <td>${data.pattern}</td>
                    <td>${ratio}</td>
                `;
                
                row.style.cursor = 'pointer';
                row.addEventListener('click', () => {
                    const districtElement = document.querySelector(`[data-district="${key}"]`);
                    if (districtElement) {
                        districtElement.querySelector('.district').click();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });
            });
        }
        
        function sortTable(type) {
            currentSort = type;
            populateTable();
        }
        
        function applyFilters() {
            const regionFilter = document.getElementById('region-filter').value;
            const patternFilter = document.getElementById('pattern-filter').value;
            const searchFilter = document.getElementById('search-filter').value.toLowerCase();
            
            const districts = document.querySelectorAll('[data-district]');
            
            districts.forEach(district => {
                const districtKey = district.getAttribute('data-district');
                const data = districtData[districtKey];
                const region = district.getAttribute('data-region');
                const pattern = district.getAttribute('data-pattern');
                
                let show = true;
                
                if (regionFilter !== 'all' && region !== regionFilter) {
                    show = false;
                }
                
                if (patternFilter !== 'all') {
                    if (patternFilter === 'equal' && pattern !== 'equal') show = false;
                    if (patternFilter === 'more-constituencies' && pattern !== 'more-constituencies') show = false;
                    if (patternFilter === 'more-taluks' && pattern !== 'more-taluks') show = false;
                    if (patternFilter === 'urban' && pattern !== 'urban') show = false;
                }
                
                if (searchFilter && !data.name.toLowerCase().includes(searchFilter)) {
                    show = false;
                }
                
                const districtPath = district.querySelector('.district');
                if (show) {
                    districtPath.classList.remove('filtered-out');
                } else {
                    districtPath.classList.add('filtered-out');
                }
            });
        }
        
        function resetFilters() {
            document.getElementById('region-filter').value = 'all';
            document.getElementById('pattern-filter').value = 'all';
            document.getElementById('search-filter').value = '';
            applyFilters();
        }
        
        // Event listeners
        document.getElementById('region-filter').addEventListener('change', applyFilters);
        document.getElementById('pattern-filter').addEventListener('change', applyFilters);
        document.getElementById('search-filter').addEventListener('input', applyFilters);
        
        // Map interactivity
        const districtGroups = document.querySelectorAll('[data-district]');
        districtGroups.forEach(group => {
            const districtPath = group.querySelector('.district');
            const districtKey = group.getAttribute('data-district');
            
            districtPath.addEventListener('mouseenter', function() {
                if (!selectedDistrict && !this.classList.contains('filtered-out')) {
                    displayDistrictInfo(districtKey);
                }
            });
            
            districtPath.addEventListener('click', function() {
                if (this.classList.contains('filtered-out')) return;
                
                districtGroups.forEach(g => g.querySelector('.district').classList.remove('active'));
                
                if (selectedDistrict === districtKey) {
                    selectedDistrict = null;
                } else {
                    selectedDistrict = districtKey;
                    this.classList.add('active');
                    displayDistrictInfo(districtKey);
                }
            });
        });
        
        // Initialize
        populateTable();
    </script>
</body>
</html>